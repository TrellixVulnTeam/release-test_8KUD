/* eslint-disable @typescript-eslint/no-var-requires */
const webpack = require('webpack');
const env = require('../envs');

module.exports = (appName) => {
  if (env.__PROD__) {
    return ({
      devtool: false,
      plugins: [
        new webpack.SourceMapDevToolPlugin({
          publicPath: `${env.SOURCEMAP_CDN}/${appName}/${env.BUILD_NUMBER}/`,
          filename: '[file].map',
        }),
      ],
    });
  }

  return ({
    devtool: 'eval-cheap-module-source-map',
  });
};
